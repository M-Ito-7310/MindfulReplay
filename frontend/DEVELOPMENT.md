# 開発環境設定

## Native開発（Expo Go）でのAPI設定

iPhone/AndroidでExpo Goを使って開発する場合、API接続の設定が必要です。

### 1. 環境変数の設定

プロジェクトルートで`.env`ファイルを作成し、開発用IPアドレスを設定してください：

```bash
# .env ファイル
EXPO_PUBLIC_DEV_IP=192.168.1.10  # あなたの開発マシンのIPアドレス
EXPO_PUBLIC_API_URL=http://192.168.1.10:3000/api  # 完全なAPIのURL（オプション）
```

### 2. IPアドレスの確認方法

#### Windows
```bash
ipconfig
```

#### Mac/Linux  
```bash
ifconfig
```

#### 手動確認
- Wi-Fi設定から現在接続しているネットワークの詳細を確認
- 通常は `192.168.x.x` の形式

### 3. 注意事項

- **同じWi-Fiネットワーク**: 開発マシンとモバイルデバイスが同じWi-Fiネットワークに接続している必要があります
- **ファイアウォール**: Windowsファイアウォールやセキュリティソフトがポート3000をブロックしていないか確認してください
- **バックエンドサーバー**: バックエンドサーバー（ポート3000）が起動していることを確認してください

### 4. 動作確認

1. バックエンドサーバーを起動: `npm run start` (backend/)
2. フロントエンドを起動: `npm run start` (frontend/)  
3. Expo GoでQRコードをスキャン
4. アプリでログイン/動画追加などの機能をテスト

### 5. トラブルシューティング

#### 「Cannot read property 'hostname' of undefined」エラー
- ✅ 修正済み: この問題は最新版で解決されています
- 古いキャッシュが原因の可能性がある場合は、Expo Goアプリでキャッシュをクリアしてください

#### 「TypeError: window.confirm is not a function」エラー
- ✅ 修正済み: 統一されたダイアログサービスを実装しました
- Web/Native環境での自動切り替えが動作します

#### ネットワークエラー
- 開発マシンとモバイルデバイスが同じWi-Fiに接続されているか確認
- バックエンドサーバーが起動しているか確認（http://[IP]:3000/health にアクセス可能か）

#### ファイアウォールエラー  
- Windowsの場合: Windows Defenderファイアウォールでポート3000を許可
- macOSの場合: システム設定 > セキュリティとプライバシー > ファイアウォール

## 実装されたクロスプラットフォーム機能

### 統一ダイアログサービス
- **確認ダイアログ**: Web(`window.confirm`) / Native(`Alert.alert`)
- **アラートダイアログ**: Web(`window.alert`) / Native(`Alert.alert`) 
- **削除確認**: 統一されたインターフェース
- **成功・エラーメッセージ**: プラットフォーム自動判定

### 対応済み機能
- ✅ ログアウト確認とメッセージ
- ✅ メモの削除確認とメッセージ
- ✅ タスクの削除確認とメッセージ
- ✅ 動画保存成功メッセージ
- ✅ エラーハンドリング統一